<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Home</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #f5f5f5;
  color: #111;
  font-family: system-ui, sans-serif;
  transition: background 2s, color 2s;
}

main {
  max-width: 700px;
  margin: 15vh auto;
  padding: 40px;
}

h1 {
  font-weight: 500;
}

p {
  line-height: 1.6;
}

#whisper {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0;
  font-style: italic;
  transition: opacity 2s;
  pointer-events: none;
}

/* creep states */
.creep-1 {
  background: #eee;
}

.creep-2 {
  background: #111;
  color: #e5e5e5;
}

.creep-3 {
  letter-spacing: 0.04em;
}

.lag {
  filter: blur(0.6px);
}

</style>
</head>
<body>

<main id="main">
  <h1>Willkommen</h1>
  <p>
    Das ist eine einfache Website.  
    Sie erklärt nichts Besonderes.  
    Du kannst sie dir in Ruhe ansehen.
  </p>
</main>

<div id="whisper"></div>

<!-- audio (sehr leise, loop) -->
<audio id="breathing" loop preload="auto">
  <source src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=">
</audio>

<script>
let start = Date.now();
let phase = 0;
let interacted = false;

const whispers = [
  "hast du das auch gemerkt?",
  "das war gerade langsamer.",
  "bleib kurz stehen.",
  "das gehört nicht so.",
  "du bist noch da."
];

const whisperEl = document.getElementById("whisper");
const main = document.getElementById("main");
const audio = document.getElementById("breathing");

/* user interaction unlocks audio */
document.addEventListener("click", () => {
  interacted = true;
  audio.volume = 0.03;
});

/* random whisper text */
function whisper(text) {
  whisperEl.textContent = text;
  whisperEl.style.opacity = "0.6";
  setTimeout(() => whisperEl.style.opacity = "0", 4000);
}

/* fake lag */
function lag() {
  document.body.classList.add("lag");
  setTimeout(() => {
    document.body.classList.remove("lag");
  }, 150 + Math.random() * 300);
}

/* escalation loop */
setInterval(() => {
  const t = (Date.now() - start) / 1000;

  // PHASE 1 – still normal
  if (t > 30 && phase === 0) {
    document.body.classList.add("creep-1");
    phase = 1;
  }

  // PHASE 2 – unease
  if (t > 60 && phase === 1) {
    document.body.classList.add("creep-2");
    whisper("irgendwas fühlt sich off an.");
    phase = 2;
  }

  // PHASE 3 – instability
  if (t > 90 && phase === 2) {
    document.body.classList.add("creep-3");
    phase = 3;
  }

  // random lag
  if (phase >= 2 && Math.random() < 0.15) {
    lag();
  }

  // random whisper
  if (phase >= 2 && Math.random() < 0.1) {
    whisper(whispers[Math.floor(Math.random() * whispers.length)]);
  }

  // audio creep
  if (phase >= 3 && interacted) {
    audio.play().catch(() => {});
    if (Math.random() < 0.05) {
      audio.volume = 0.02 + Math.random() * 0.04;
    }
  }

}, 4000);

/* behavior-based creep */
document.addEventListener("mousemove", e => {
  if (phase >= 3 && Math.random() < 0.02) {
    whisper("beweg dich nicht so.");
  }
});

document.addEventListener("scroll", () => {
  if (phase >= 2 && Math.random() < 0.1) {
    lag();
  }
});
</script>

</body>
</html>
